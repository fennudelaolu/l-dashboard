webpackJsonp([4,6],{Bfhq:function(e,t){},F3dJ:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a("3cXf"),r=a.n(n),o=a("WJ1e"),s=a("jf5J"),i=a("eXYJ"),l={name:"MakeScreen",components:{MDragbleBox:o.a,MDragbleItem:s.a,MCart:i.a},props:{drag_box_option:{type:Object,default:null},drag_items:{type:Array,default:[]}},data:function(){return{com_drag_items:[],com_drag_box_option:null}},methods:{setZoom:function(){var e=this.drag_box_option.style.width,t=this.drag_box_option.style.height,a=0;if(this.$refs["show-screen"]){var n=this.$refs["show-screen"].offsetHeight,r=this.$refs["show-screen"].offsetWidth/e,o=n/t;a=r<o?r:o}this.setCom_drag_items(a),this.setCom_drag_box_option(a)},setCom_drag_items:function(e){var t=JSON.parse(r()(this.drag_items)),a=e;t=t.map(function(e,t){var n=e.drag_option;return n.w*=a,n.h*=a,n.top*=a,n.left*=a,n.z=t,e}),this.com_drag_items=t},setCom_drag_box_option:function(e){var t=e,a=JSON.parse(r()(this.drag_box_option));a.style.width*=t,a.style.height*=t,this.com_drag_box_option=a}},mounted:function(){this.setZoom()},filters:{},computed:{},watch:{}},c={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{ref:"show-screen",staticClass:"show-screen"},[null!=e.com_drag_box_option?a("MDragbleBox",{staticStyle:{margin:"0 auto"},attrs:{option:e.com_drag_box_option,have_border:!1}},e._l(e.com_drag_items,function(t,n){return a("MDragbleItem",{key:n,attrs:{index:n,active_index:-1,option:t.drag_option}},["text"===t.type?a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.value,expression:"item.value"}],style:t.style,domProps:{value:t.value},on:{input:function(a){a.target.composing||e.$set(t,"value",a.target.value)}}}):e._e(),e._v(" "),"chart"===t.type?a("MCart",{attrs:{w:t.drag_option.w,h:t.drag_option.h,option:t.option}}):e._e()],1)}),1):e._e()],1)},staticRenderFns:[]};var d=a("C7Lr")(l,c,!1,function(e){a("JGR9")},"data-v-be3fdee2",null);t.default=d.exports},JGR9:function(e,t){},"SJ/1":function(e,t){},"dGk/":function(e,t){},lEkQ:function(e,t,a){"use strict";var n={name:"m_aside1",props:{list:{type:Object,default:{table:{child:[{id:6,name:"ffff",pname:"table",real_name:"1990-01-31",type:"file",user:"a"}],name:"table"}}},type:{type:String,default:"file"}},data:function(){return{search_key:"",open_states:[],active_item:{},active_index:""}},methods:{init:function(){this.open_states=[],this.active_file={}},refreshTree:function(){this.$emit("refreshTree")},openFolder:function(e){this.a=!this.a,this.$set(this.open_states,e,this.a)},createFolder:function(){this.$emit("create",{type:"folder"})},delFolder:function(e){this.$emit("delete",{type:"folder",folder_name:e.name})},createFile:function(e){this.$emit("create",{type:"file",folder:e})},openFile:function(e,t){this.active_item=e,this.active_index=t,this.$emit("openFile",{type:"file",data:e})},delFile:function(e,t){this.active_item=e,this.$emit("delete",{type:"file",folder_name:t,file_name:e.name})}},filters:{folder_icon:function(e){return e?"#icon_open_folder":"#icon_folder"},f_type:function(e){return"child"in e?"folder":"file"}},computed:{search_reasul:function(){var e=this.search_key,t=[];for(var a in this.list){var n=this.list[a].child||[];((n=n.filter(function(t){return t.name=t.name||"",t.name.indexOf(e)>=0})).length>0||""==e)&&t.push({name:a,child:n})}return t}},watch:{list:{handler:function(e,t){this.init()},deep:!0}}},r={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"m-aside1"},[a("div",{staticClass:"m-aside1-title"},[a("div",{staticClass:"g-fl f-b f-12"},[e._v("数据表")]),e._v(" "),a("M_Icon",{staticClass:"g-fr",attrs:{size:24,type:"#icon_refresh",isbtn:!0,color:"#aaa"},on:{click:function(t){e.refreshTree()}}}),e._v(" "),a("M_Icon",{staticClass:"g-fr",attrs:{size:24,type:"#btn_add",isbtn:!0,color:"#aaa"},on:{click:function(t){e.createFolder()}}})],1),e._v(" "),a("div",{staticClass:"m-aside1-seach"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.search_key,expression:"search_key"}],staticClass:"m-aside1-seach-item",attrs:{type:"text"},domProps:{value:e.search_key},on:{input:function(t){t.target.composing||(e.search_key=t.target.value)}}})]),e._v(" "),a("div",{staticClass:"m-aside1-list"},e._l(e.search_reasul,function(t,n){return a("div",{key:n,staticClass:"m-aside1-list-item"},[a("div",{staticClass:"m-aside1-folder"},[a("div",{staticClass:"folder-title"},[a("M_Icon",{staticClass:"m-aside1-list-item-icon",attrs:{type:e._f("folder_icon")(e.open_states[n]),size:24}}),e._v(" "),a("a",{staticClass:"g-nowrap m-aside1-list-item-title no-select",on:{click:function(t){e.openFolder(n)}}},[e._v("\n            "+e._s(t.name)+"\n          ")]),e._v(" "),a("div",{staticClass:"folder-drop"},[a("Dropdown",{staticClass:"m-aside1-drapdown",attrs:{trigger:"click"}},[a("a",{attrs:{href:"javascript:void(0)"}},[a("M_Icon",{attrs:{size:24,type:"#btn_more1"}})],1),e._v(" "),a("DropdownMenu",{attrs:{slot:"list"},slot:"list"},[a("div",{on:{click:function(a){e.createFile(t)}}},[a("DropdownItem",[e._v("新建")])],1),e._v(" "),a("div",{on:{click:function(a){e.delFolder(t)}}},[a("DropdownItem",[e._v("删除")])],1)])],1)],1)],1),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.open_states[n],expression:"open_states[k]"}]},e._l(t.child,function(n,r){return a("div",{key:r,staticClass:"m-aside1-file",style:e.active_index===r?"background: #ddd":""},[a("Tooltip",{attrs:{content:n.name,placement:"right"}},[a("M_Icon",{staticClass:"m-aside1-list-item-icon no-select",attrs:{type:"#icon_excel",size:24}}),e._v(" "),a("a",{staticClass:"g-nowrap m-aside1-list-item-title",on:{click:function(t){t.stopPropagation(),e.openFile(n,r)}}},[e._v("\n                "+e._s(n.name)+"\n              ")]),e._v(" "),a("div",{staticClass:"table-drop"},[a("Dropdown",{attrs:{trigger:"click"}},[a("a",{attrs:{href:"javascript:void(0)"}},[a("M_Icon",{staticClass:"m-aside1-list-item-icon",attrs:{size:24,type:"#btn_more1",color:"#aaa"}})],1),e._v(" "),a("DropdownMenu",{attrs:{slot:"list"},slot:"list"},[a("div",{on:{click:function(a){e.delFile(n,t.name)}}},[a("DropdownItem",[e._v("删除")])],1)])],1)],1)],1)],1)}),0)])])}),0)])},staticRenderFns:[]};var o=a("C7Lr")(n,r,!1,function(e){a("SJ/1"),a("dGk/")},"data-v-6f47044e",null);t.a=o.exports},wAIK:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a("lC5x"),r=a.n(n),o=a("J0Oq"),s=a.n(o),i=a("E/Rz"),l=a("PshF"),c=a("O3Ok"),d=a("Qbo8"),_=a("lEkQ"),f=a("F3dJ"),m=a("JA8L"),u={name:"ScreentList",components:{M_Aside1:_.a,ShowScreen:f.default,Modal:d.a,Input:c.a,Icon:l.a,Button:i.a},data:function(){return{folder_name:"文件夹1",aside_tree:null,del_form:{show:!1,folder_name:"",file_name:"",type:"",loading:!1},create_loading:!1,create_folder_form:{show:!1,name:""},act_screen:null}},mounted:function(){this.init()},methods:{goMakeScreenPage:function(e){this.$router.push({name:"大屏幕制作",params:{target_forder_name:e}})},init:function(){var e=this;return s()(r.a.mark(function t(){var a;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,m.c.findTree();case 2:200==(a=t.sent).data.code?e.aside_tree=a.data.data||null:e.aside_tree=null,e.create_folder_form={show:!1,loading:!1,name:""};case 5:case"end":return t.stop()}},t,e)}))()},createF:function(e){var t=e.type,a=e.folder;if("folder"===t)this.openCreateFolderForm();else{var n=a.name||"未分类";this.goMakeScreenPage(n)}},del_ready:function(e){this.del_form={show:!0,folder_name:e.folder_name,file_name:e.file_name,type:e.type,loading:!1}},deleteF:function(){var e=this;return s()(r.a.mark(function t(){var a,n;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(a=null,n=e.del_form.type,e.del_form.loading=!0,"folder"!==n){t.next=9;break}return t.next=6,m.c.delFolder({folder_name:e.del_form.folder_name});case 6:a=t.sent,t.next=12;break;case 9:return t.next=11,m.c.delScreen({folder_name:e.del_form.folder_name,table_names:[e.del_form.file_name]});case 11:a=t.sent;case 12:e.del_form.loading=!1,200==a.data.code?(e.del_form.show=!1,e.init()):e.$Message.error("删除失败");case 14:case"end":return t.stop()}},t,e)}))()},openFile:function(e){var t=this;return s()(r.a.mark(function a(){return r.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:t.act_screen=e.data||null;case 1:case"end":return a.stop()}},a,t)}))()},openCreateFolderForm:function(){this.create_folder_form={show:!this.create_folder_form.show,name:""}},createFolder:function(){var e=this;return s()(r.a.mark(function t(){var a;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.create_loading=!0,a=e.create_folder_form.name||"未分类",t.next=4,m.c.createFolder(a);case 4:200==t.sent.data.code?(e.$Message.success("创建成功"),e.init()):e.$Message.error("创建失败"),e.create_loading=!1;case 7:case"end":return t.stop()}},t,e)}))()}},computed:{screen_option:function(){if(null==this.act_screen)return null;var e=this.act_screen.screen_option||"{}";return e=JSON.parse(e)}},watch:{}},p={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"screnn-list"},[a("aside",{staticClass:"screnn-list-aside"},[a("M_Aside1",{attrs:{list:e.aside_tree},on:{create:e.createF,delete:e.del_ready,openFile:e.openFile,refreshTree:e.init}})],1),e._v(" "),a("section",{staticClass:"screnn-list-section",staticStyle:{padding:"0"}},[null!=e.act_screen?a("div",{staticClass:"screen-list-right-top"},[a("span",{staticClass:"title"},[e._v(e._s(e.act_screen.name))]),e._v(" "),a("div",{staticClass:"btn-group g-fr"},[a("Button",{attrs:{disabled:""}},[e._v("全屏")]),e._v(" "),a("Button",{attrs:{disabled:""}},[e._v("刷新数据")]),e._v(" "),a("Button",{attrs:{disabled:""}},[e._v("编辑")]),e._v(" "),a("Button",{attrs:{type:"error"}},[e._v("删除")])],1)]):e._e(),e._v(" "),a("div",{staticClass:"screen-list-right-section"},[null!=e.screen_option?a("ShowScreen",{attrs:{drag_items:e.screen_option.drag_items,drag_box_option:e.screen_option.drag_box_option}}):e._e()],1)]),e._v(" "),a("Modal",{attrs:{width:"360"},model:{value:e.del_form.show,callback:function(t){e.$set(e.del_form,"show",t)},expression:"del_form.show"}},[a("p",{staticStyle:{color:"#f60","text-align":"center"},attrs:{slot:"header"},slot:"header"},[a("Icon",{attrs:{type:"ios-information-circle"}}),e._v(" "),a("span",[e._v("Delete confirmation")])],1),e._v(" "),a("div",{staticStyle:{"text-align":"center"}},["folder"===e.del_form.type?a("p",[e._v("删除文件夹“ "+e._s(e.del_form.folder_name)+" ”及文件夹下的表格。")]):a("p",[e._v("删除“ "+e._s(e.del_form.file_name)+" ”表格。")]),e._v(" "),a("p",[e._v("是否继续?")])]),e._v(" "),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("Button",{attrs:{type:"error",size:"large",long:"",loading:e.del_form.loading},on:{click:e.deleteF}},[e._v("确认删除")])],1)]),e._v(" "),a("Modal",{attrs:{title:"请输入分类名称"},on:{"on-cancel":e.openCreateFolderForm},model:{value:e.create_folder_form.show,callback:function(t){e.$set(e.create_folder_form,"show",t)},expression:"create_folder_form.show"}},[a("Input",{attrs:{placeholder:"Enter something..."},model:{value:e.create_folder_form.name,callback:function(t){e.$set(e.create_folder_form,"name",t)},expression:"create_folder_form.name"}}),e._v(" "),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("Button",{attrs:{size:"large",type:"info",loading:e.create_loading},on:{click:e.createFolder}},[e._v("创建")])],1)],1)],1)},staticRenderFns:[]};var v=a("C7Lr")(u,p,!1,function(e){a("Bfhq")},null,null);t.default=v.exports}});